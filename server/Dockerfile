FROM node:20

RUN apt-get update
RUN apt-get install -y openssl

WORKDIR /app

COPY . .

RUN npm install
ARG API_DB_URL
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ENV ACCESS_KEY = AWS_ACCESS_KEY_ID
ENV SECRET_ACCESS_KEY = AWS_SECRET_ACCESS_KEY
ENV DATABASE_URL=$API_DB_URL

ENTRYPOINT ["sh", "-c"]

CMD ["npm start"]